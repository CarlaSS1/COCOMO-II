<!DOCTYPE html>
<html>
	<head>
		<link href="styles.css" rel="stylesheet" type="text/css"/>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Project size estimator</title>
		<script src="js/jquery-3.2.1.min.js"></script>
	</head>
	<body>
	<h1>Project Size Estimator</h1><br/>
		<form name="NewProject" action="modeller.php" method="post" id="form">
			<label for="Name">Name: </label>
			<div class="sizefix"><input type="text" name="Name" placeholder="Enter project name"></div>
			<label for="KLOC">Lines of code (thousands):</label>
			<div class="sizefix"><input type="number" name="KLOC"/></div>
			<label for="Language">Language:</label>
			<select name="Language">
				<option value="Python">Python</option>
				<option value="PHP">PHP</option>
				<option value="C#">C#</option>
				<option value="C++">C++</option>
				<option value="Java">Java</option>
				<option value="Other">Other</option>
			</select><br/>
			<input type="submit" class="button" value="Submit"/>
		</form>
		
		<br/><hr/><br/>
		<div id="hideMe" style="display: none">
			<h2 style="text-align: center">Results</h2><br/>
			<div id="results"></div><br/>
			<form id="outputForm">
				<label>More results: </label><br/>
				<fieldset disabled="disabled"><div class="fieldsetsarebroken">
					<label>Name: </label>
					<div class="sizefix"><input id="resultsName" type="text" /></div>
					<label>Language: </label>
					<div class="sizefix"><input id="resultsLang" type="text" /></div>
				</div></fieldset>
			</form><br/>
			<h4>Historical Data</h4><br/>
			<table><!-- Yay, hardcoded data! This could be pulling from a database, but why? -->
				<tr>
					<th></th>
					<th>Field 1</th>
					<th>Field 2</th>
					<th>Field 3</th>
				</tr>
				<tr>
					<th>Row 1</th>
					<td>Data!</td>
					<td>More data!</td>
					<td>So much data!</td>
				</tr>
				<tr>
					<th>Row 2</th>
					<td>Really a lot of data!</td>
					<td>Bountiful data</td>
					<td>An abundance of data!</td>
				</tr>
			</table><br/>
			<div id="fieldDefinitions">
				<p>Field definitions:</p>
				<ul>
					<li>I thought what I'd do was</li>
					<li>I'd pretend I was one of those deaf-mutes</li>
					<li>That way I wouldn't have to have any goddam stupid useless conversations with anybody</li>
					<li>If anybody wanted to tell me something</li>
					<li>they'd have to write it on a piece of paper and shove it over to me</li>
				</ul>
			</div>
		</div><br/>
	</body>
</html>

<script type="text/javascript">
	$(document).ready( new function() {
		$('#form').submit(function(event) {
			event.preventDefault();
			var form = $(this);
			$.ajax({
				type: form.attr('method'),
				url: form.attr('action'),
				data: form.serialize(),
				datatype: 'json'
			}).done(function(data) {
				var results = $.parseJSON(data);
				var outputString = "<ul>";
				
				for (thing in results["list"]) {
					outputString += "<li>" + results["list"][thing] + "</li>";
				}
				outputString += "</ul>";
				$('#results').html(outputString);
				
				$('#hideMe').css("display", "block");				
				$('#resultsName').val(results["nameString"]);
				$('#resultsLang').val(results["langString"]);
				
			});
			
		});
	});
</script>